{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "prompt-input",
  "type": "registry:component",
  "description": " A versatile input component for chat prompts with file attachment support.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "https://dr-hooks-6t7r69njm-abirpandas-projects.vercel.app/r/loading-swap.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/ui/prompt-input.tsx",
      "content": "import React from \"react\";\nimport { ArrowUp, Paperclip, X } from \"lucide-react\";\nimport { LoadingSwap } from \"@/components/ui/loading-swap\";\nimport { cn } from \"@/lib/utils\";\n\ninterface PromptInputProps {\n  onsubmit: (value: string, files?: File[]) => Promise<void> | void;\n  onchange?: (value: string) => void;\n  onError?: (error: Error) => void;\n  allowFiles?: boolean;\n  acceptedTypes?: string;\n  loading: boolean;\n  maxfiles?: number;\n  className?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  maxLength?: number;\n  minLength?: number;\n  id?: string;\n  \"aria-label\"?: string;\n}\n\nexport function PromptInput({\n  onsubmit,\n  onchange,\n  onError,\n  loading,\n  allowFiles = false,\n  acceptedTypes = 'image/*,.pdf,.doc,.docx',\n  maxfiles = 4,\n  placeholder = \"what do you wanna build\",\n  className,\n  disabled = false,\n  maxLength,\n  minLength,\n  id,\n  \"aria-label\": ariaLabel,\n}: PromptInputProps) {\n  const [value, setValue] = React.useState<string>(\"\");\n  const [files, setFiles] = React.useState<File[]>([]);\n  const [submitting, setSubmitting] = React.useState<boolean>(false);\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n  const textareaRef = React.useRef<HTMLTextAreaElement>(null);\n\n  // Auto-resize textarea\n  React.useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"auto\";\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n    }\n  }, [value]);\n\n  function handleChange(e: React.ChangeEvent<HTMLTextAreaElement>) {\n    const v = e.target.value;\n    setValue(v);\n    if (onchange) {\n      onchange(v);\n    }\n  }\n\n  async function handleSubmit(e?: React.FormEvent) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (!canSubmit) return;\n\n    setSubmitting(true);\n    try {\n      if (allowFiles && files.length > 0) {\n        await onsubmit(value, files);\n      } else {\n        await onsubmit(value);\n      }\n      setFiles([]);\n      setValue(\"\");\n      \n    } catch (error) {\n      const err = error instanceof Error ? error : new Error(\"Error submitting the request\");\n      if (onError) {\n        onError(err);\n      } else {\n        console.error(\"Error submitting:\", err);\n      }\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  function handleKeydown(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  }\n\n  function handleFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    if (allowFiles && e.target.files) {\n      const selectedFiles = Array.from(e.target.files).slice(0, maxfiles);\n      setFiles((prev) => [...prev, ...selectedFiles].slice(0, maxfiles));\n      \n      // Reset input to allow same file selection\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\";\n      }\n    }\n  }\n\n  function removeFile(index: number) {\n    setFiles((prev) => prev.filter((_, i) => i !== index));\n  }\n\n  const canSubmit = React.useMemo(() => {\n    const hasMinLength = minLength ? value.trim().length >= minLength : true;\n    return value.trim().length > 0 && hasMinLength && !submitting && !loading && !disabled;\n  }, [value, submitting, loading, disabled, minLength]);\n\n  const isDisabled = disabled || loading || submitting;\n\n  return (\n    <form\n      className={cn(\n        \"relative  rounded-xl shadow-lg p-2  border  w-100\",\n         'dark: bg-gradient-to-bl from-zinc-900/70 via-zinc-900 to-zinc-900/70 border-zinc-700/70',\n        className\n      )} onSubmit={handleSubmit}\n    >\n      {/* File previews */}\n      {files.length > 0 && (\n        <div className=\"flex flex-wrap gap-2 mb-2 px-2 pt-1\">\n          {files.map((file, index) => (\n            <div\n              key={`${file.name}-${index}`}\n              className=\"flex items-center gap-2 bg-zinc-800 px-3 py-1.5 rounded-lg border border-zinc-700\"\n            >\n              <span className=\"text-xs text-zinc-300 truncate max-w-[120px]\">\n                {file.name}\n              </span>\n              <button\n                type=\"button\"\n                onClick={() => removeFile(index)}\n                disabled={isDisabled}\n                className=\"text-zinc-400 hover:text-white disabled:opacity-50 transition-colors\"\n                aria-label={`Remove ${file.name}`}\n              >\n                <X size={14} />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Textarea */}\n      <textarea\n        ref={textareaRef}\n        id={id}\n        value={value}\n        onChange={handleChange}\n        onKeyDown={handleKeydown}\n        placeholder={placeholder}\n        disabled={isDisabled}\n        maxLength={maxLength}\n        aria-label={ariaLabel || placeholder}\n        className=\"resize-none min-h-20 max-h-45 focus:outline-none w-full p-2 bg-transparent text-white placeholder:text-zinc-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        style={{ overflow: \"auto\" }}\n      />\n\n      {/* Bottom gradient line */}\n      <div className=\"absolute bg-gradient-to-r from-transparent via-cyan-500/80 to-transparent w-full h-[1px] bottom-0 left-0\" />\n\n      {/* Bottom controls */}\n      <div className=\"flex items-center justify-between pt-2 px-1\">\n        {/* File upload button */}\n        {allowFiles && (\n          <div>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              multiple\n              onChange={handleFileChange}\n              className=\"hidden\"\n              accept={acceptedTypes}\n              disabled={files.length >= maxfiles || isDisabled}\n            />\n            <button\n              type=\"button\"\n              onClick={() => fileInputRef.current?.click()}\n              disabled={files.length >= maxfiles || isDisabled}\n              className=\"text-zinc-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors p-1\"\n              aria-label=\"Attach files\"\n            >\n              <Paperclip size={20} />\n            </button>\n          </div>\n        )}\n\n        {/* Character count */}\n        {maxLength && (\n          <span className=\"text-xs text-zinc-500 ml-auto mr-2\">\n            {value.length}/{maxLength}\n          </span>\n        )}\n\n        {/* Submit button */}\n        <button\n          type=\"submit\"\n          disabled={!canSubmit}\n          className={cn(\n            \"bg-gray-300 w-8 h-8 rounded-full text-gray-700 shadow-lg border border-gray-200/20 flex items-center justify-center transition-all \",\n            canSubmit\n              ? \"hover:bg-gray-200 hover:scale-105 cursor-pointer\"\n              : \"opacity-50 cursor-not-allowed\",\n            !allowFiles && \"ml-auto\"\n          )}\n          aria-label=\"Submit message\"\n        >\n          <LoadingSwap isLoading={loading || submitting} className=\"flex items-center justify-center\">\n            <ArrowUp size={18} />\n          </LoadingSwap>\n        </button>\n      </div>\n    </form>\n  );\n}",
      "type": "registry:ui"
    }
  ]
}